<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <title>Alert Bus Demo</title>

    <script>
      // var appBaseUrlPath = (location.pathname.split(/\//).slice(0,1+2).join("/")+"/").replace(/\/+/g,"/").replace(/"/g,"");
      // var appAssetsRelativeUrlPath = "public/";
      // document.write('<base href="' + appBaseUrlPath + appAssetsRelativeUrlPath + '" data-uu-app-base="' + appBaseUrlPath + '" data-uu-app-assets-base="' + appAssetsRelativeUrlPath + '">');
    </script>

    <link type="text/css" rel="stylesheet" href="https://cdn.plus4u.net/libs/materialdesignicons/3.5.95/css/materialdesignicons.css">
    <script src="https://cdn.plus4u.net/libs/systemjs/0.19.47/system.js"></script>

    <script>
      SystemJS.config({
        "paths": {
          "systemjs": "https://cdn.plus4u.net/libs/systemjs/0.19.47/system.js",
          "react": "https://cdn.plus4u.net/libs/react/16.8.6/react.js",
          "react-dom": "https://cdn.plus4u.net/libs/react-dom/16.8.6/react-dom.js",
          "create-react-class": "https://cdn.plus4u.net/libs/create-react-class/15.6.3/create-react-class.js",
          "prop-types": "https://cdn.plus4u.net/libs/prop-types/15.7.2/prop-types.js",
          "uu_appg01_core": "https://cdn.plus4u.net/uu-appg01-core/3.0.0/uu_appg01_core.min.js",
          "uu_appg01": "https://cdn.plus4u.net/uu-appg01/3.0.0/uu_appg01-base.min.js",
          "uu_oidcg01": "https://cdn.plus4u.net/uu-oidcg01/3.0.0/uu_oidcg01.min.js",

          "uu5g04": "/uu5g04.js",
          "uu5g04-bricks": "/uu5g04-bricks.js"
        }
      });

      // SystemJS.set("UU_ENVIRONMENT", SystemJS.newModule({"__useDefault": true, "default": {
      //   "uuoidc.redirectUri":"callbacks/login-callback.html"
      // }}));
    </script>

  </head>
  <body>
    <div id="renderHere"></div>

    <!--<script src="https://cdn.plus4u.net/uu-appg01-template/1.0.0/in-browser-transpilation.min.js"></script>-->
    <script src="https://cdn.plus4u.net/uu-appg01-template/1.0.0/in-browser-transpilation.js"></script>
    <script type="text/babel">
      import UU5 from "uu5g04";
      import "uu5g04-bricks";

      var Page = UU5.Common.VisualComponent.create({
        mixins: [UU5.Common.BaseMixin],

        _onAdd: function () {
          var props = {
            colorSchema: ['success', 'info', 'warning', 'danger'][Math.floor(Math.random() * 4)],
            closeTimer: Math.random() > 0.5 ? null : 5000,
            content: <UU5.Bricks.Strong>{String(new Date())}</UU5.Bricks.Strong>,
            onClose: function (alert) {
              console.log("alert close", alert.getId());
            }
          };

          this.alertBus.addAlert(props);
        },

        render: function () {
          return (
            <UU5.Bricks.Container>
              <UU5.Bricks.Header level="1">UU5.Bricks.AlertBus</UU5.Bricks.Header>

              <h1 id="description">Description</h1>
              <p>AlertBus slouží jako kontejner pro alerts. Může obsahovat volitelné množství alertů, které jsou
                seřazeny za sebou podle toho, kdy se měly zobrazit. Po tom, co první je první alert zavřen (pomocí
                closeTimer nebo uživatelem), se objeví druhý v řadě, pak třetí atd.</p>
              <h1>Příklad použití</h1>
              <UU5.Bricks.AlertBus
                ref_={(alertBus) => this.alertBus = alertBus}
                position="right"
                closeDisabled={false}
                block={false}
                className="my-class"

                colorSchema="success"
                closeTimer={15000}
                onClose={function (alert) {
                  console.log("Props close", alert.getId())
                }} />

              <UU5.Bricks.Button content="Add Message" onClick={this._onAdd} />
              <UU5.Bricks.Button content="Set Message" onClick={() => this.alertBus.setAlert({content: "a"})} />
              <UU5.Bricks.Button content="Clear Messages" onClick={()=> this.alertBus.clearAlerts()} />


              <h1>Props examples</h1>
              <p><b>label</b> - úvodní nápis v alert. Pokud je zadán, zobrazí se tučně.</p>
              <p>Použije se v případě, že zobrazovaný alert nemá nastaven vlastní label.</p>
              <br />
              <p><b>colorSchema</b> - nastaví důležitost a tím i vzhled alert v pomocí colorSchema class (success,
                warning, danger, info)</p>
              <p>Použije se v případě, že zobrazovaný alert nemá nastaven vlastní colorSchema.</p>
              <br />
              <p><b>position</b> - nastaví pozici alert (left, center, right)</p>
              <p>Je použit pro všechny alerts v alertBus, nezávisle na jejich vlastních props.</p>
              <br />
              <p><b>closeTimer</b> - nastaví, na jak dlouho se alert zobrazí (v milisekundách). Po uplynutí tohoto času
                se alert sám zavře.</p>
              <p>Použije se v případě, že zobrazovaný alert nemá nastaven vlastní closeTimer.</p>
              <br />
              <p><b>closeDisabled</b> - true = odebere ze všech alert křížek pro zavření alertu. Je stále možné alert
                zavřít pomocí property closeTimer nebo pomocí interface.</p>
              <p>Je použit pro všechny alerts v alertBus, nezávisle na jejich vlastních props.</p>
              <br />
              <p><b>block</b> - true = alertBus má block position, false = alertBus má absolute position</p>
              <p>Je použit pro všechny alerts v alertBus, nezávisle na jejich vlastních props.</p>
              <br />
              <p><b>onClose</b> - funkce, která se zavolá pro zavření alert</p>
              <p>Použije se v případě, že zobrazovaný alert nemá nastaven vlastní onClose.</p>
            </UU5.Bricks.Container>
          );
        }
      });

      UU5.Common.DOM.render(UU5.Common.Element.create(Page, null), document.getElementById('renderHere'));
    </script>
  </body>
</html>
