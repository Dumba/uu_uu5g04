<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <title>Example 01</title>

    <script>
      if (!location.href.match(/^(about:|file:)/)) {
        var bplCookie = document.cookie.match(/(^|;\s*)uu\.app\.bpl=([^;]+)/);
        var bplSegmentCount = (bplCookie ? Number(bplCookie[2]) : null);
        if (typeof bplSegmentCount !== "number" || isNaN(bplSegmentCount) || bplSegmentCount < 0) bplSegmentCount = 2;
        var appBaseUrlPath = (location.pathname.split(/\//).slice(0,1+bplSegmentCount).join("/")+"/").replace(/\/+/g,"/").replace(/"/g,"");
        var appAssetsRelativeUrlPath = "public/0.0.0/";
        document.write('<base href="' + appBaseUrlPath + appAssetsRelativeUrlPath + '" data-uu-app-base="' + appBaseUrlPath + '" data-uu-app-assets-base="' + appAssetsRelativeUrlPath + '">');
      }
    </script>

    <link type="text/css" rel="stylesheet"
          href="https://cdn.plus4u.net/libs/materialdesignicons/2.0.46/css/materialdesignicons.min.css">

    <script src="https://cdn.plus4u.net/libs/systemjs/0.19.47/system.js"></script>

    <script>
      var uu5g04 = "";
      location.search.replace(/[?&]uu5g04=([^&#]*)/, function (m, g1) { uu5g04 = g1; });
      var uu5g04Base = uu5g04 === "" ? "/" : "https://cdn.plus4u.net/uu-uu5g04/" + uu5g04 + "/";
      SystemJS.config({
        "paths": {
          "systemjs": "https://cdn.plus4u.net/libs/systemjs/0.19.47/system.js",
          "react": "https://cdn.plus4u.net/libs/react/16.8.6/react.js",
          "react-dom": "https://cdn.plus4u.net/libs/react-dom/16.8.6/react-dom.js",
          "create-react-class": "https://cdn.plus4u.net/libs/create-react-class/15.6.3/create-react-class.js",
          "prop-types": "https://cdn.plus4u.net/libs/prop-types/15.7.2/prop-types.js",

          "uu5g04": uu5g04Base + "uu5g04.js",
          "uu5g04-bricks": uu5g04Base + "uu5g04-bricks.js",
          "uu5g04-forms": uu5g04Base + "uu5g04-forms.js",

          "uu_appg01_core": "https://cdn.plus4u.net/uu-appg01-core/3.0.1/uu_appg01_core.min.js",
          "uu_appg01": "https://cdn.plus4u.net/uu-appg01/3.0.1/uu_appg01-base.min.js",
          "uu_oidcg01": "https://cdn.plus4u.net/uu-oidcg01/3.0.2/uu_oidcg01.min.js",
          "uu5codekitg01": "https://cdn.plus4u.net/beta/uu-uu5codekitg01/0.1.0/uu5codekitg01.js",

          "uu_plus4u5g01": "https://cdn.plus4u.net/uu-plus4u5g01/2.0.0/uu_plus4u5g01.js",
          "uu_plus4u5g01-bricks": "https://cdn.plus4u.net/uu-plus4u5g01/2.0.0/uu_plus4u5g01-bricks.js",
          "uu_plus4u5g01-app": "https://cdn.plus4u.net/uu-plus4u5g01/2.0.0/uu_plus4u5g01-app.js",
          // "uu_plus4u5g01": "http://localhost:4322/uu_plus4u5g01.js",
          // "uu_plus4u5g01-app": "http://localhost:4322/uu_plus4u5g01-app.js",
          // "uu_plus4u5g01-bricks": "http://localhost:4322/uu_plus4u5g01-bricks.js"
        }
      });
    </script>
    <style>
      .uu5-bricks-button-group {
        margin-top: 30px;
      }

      .uu5-bricks-page .uu5-bricks-page-column-wrapper.uu5-bricks-page-column-ghost {
        height: 200px;
        background-color: rgba(13, 71, 161, 0.6);
        visibility: visible;
      }

      .uu5-bricks-page .uu5-bricks-page-column-wrapper.uu5-bricks-page-column-ghost::after {
        content: "ghost";
        position: absolute;
        top: 20px;
        left: 0;
        color: rgba(13, 71, 161);
      }

      .uu5-bricks-page .uu5-bricks-page-column-wrapper:not(.uu5-bricks-page-column-ghost) {
        background-color: rgba(255, 0, 0, 0.6);
      }

      .uu5-bricks-page .uu5-bricks-page-column-wrapper:not(.uu5-bricks-page-column-ghost)::after {
        content: "wrapper";
        position: absolute;
        top: 0;
        left: 0;
        color: rgb(255, 0, 0);
      }

      .uu5-bricks-page .uu5-bricks-page-column {
        background-color: rgba(28, 255, 0, 0.6);
      }

      .uu5-bricks-page .uu5-bricks-page-column::after {
        content: "column";
        position: absolute;
        top: 40px;
        left: 0;
        color: rgb(28, 255, 0,);
      }
    </style>

  </head>
  <body>

    <div id="uu5Example"></div>

    <script src="https://cdn.plus4u.net/uu-appg01-template/1.0.0/in-browser-transpilation.min.js"></script>
    <script type="text/babel">
      import React from "react";
      import createReactClass from "create-react-class";
      import ReactDOM from "react-dom";
      import UU5 from "uu5g04";
      import "uu5g04-bricks";
      import "uu5g04-forms";

      import Plus4U5 from "uu_plus4u5g01";
      import "uu_plus4u5g01-bricks";
      import "uu_plus4u5g01-app";

      let leftColumnContent = (
        <UU5.Bricks.Box style={{ color: "white" }}>
          <UU5.Bricks.Paragraph />
          <UU5.Bricks.Paragraph />
          <UU5.Bricks.Paragraph />
        </UU5.Bricks.Box>
      );

      let rightColumnContent = (
        <UU5.Bricks.Box style={{ color: "white" }}>
          <UU5.Bricks.Paragraph />
          <UU5.Bricks.Paragraph />
          <UU5.Bricks.Paragraph />
        </UU5.Bricks.Box>
      );

      const Page = createReactClass({
        mixins: [
          UU5.Common.BaseMixin,
          UU5.Common.ScreenSizeMixin
        ],

        getInitialState() {
          return {
            type: 1,
            fullPage: true,
            topFixed: true,
            topFixedHeight: 0,
            bottomFixed: true,
            bottomFixedHeight: 0,
            leftRelative: null,
            rightRelative: null,
            leftResizable: true,
            rightResizable: true,
            leftFixed: true,
            rightFixed: false,
            leftSwipe: 0,
            rightSwipe: 0,
            tempLeftRelative: {xs: false, s: false, m: false, l: false, xl: false},
            tempRightRelative: {xs: false, s: false, m: false, l: false, xl: false},
            leftWidth: "!xs-100px !s-100px m-150px !l-100px-300px !xl-10%-20%",
            rightWidth: "!xs-100px !s-100px m-150px !l-100px-150px !xl-10%-20%"
          }
        },

        _getTypes() {
          let result = [];
          for (let i = 0; i < 15; i++) {
            result.push(
              <UU5.Bricks.ButtonSwitch
                content={i.toString()}
                props={{ onClick: () => this.setState(() => ({ type: i })), size: "s" }}
                switchedOn={this.state.type === i}
                onProps={{ colorSchema: "blue" }}
                offProps={{ colorSchema: "default" }}
                key={i}
              />
            );
          }
          return result;
        },

        _getRelativeProps() {
          let result = [
            <UU5.Bricks.Column colWidth="xs-12 s-12 m-6 l-6 xl-6" key={"1"}>
              <UU5.Forms.Checkboxes
                type={2}
                size="m"
                key={0}
                colorSchema="blue"
                label="leftRelative"
                onChange={(opt) => {
                  let value = "";
                  for (let size in opt.value) {
                    if (opt.value[size]) {
                      value += " " + size;
                    }
                  }

                  this.setState({leftRelative: value.trim(), tempLeftRelative: opt.value});
                  opt.component.onChangeDefault(opt);
                }}
                value={[
                  {label: 'xs', name: 'xs', value: this.state.tempLeftRelative.xs},
                  {label: 's', name: 's', value: this.state.tempLeftRelative.s},
                  {label: 'm', name: 'm', value: this.state.tempLeftRelative.m},
                  {label: 'l', name: 'l', value: this.state.tempLeftRelative.l},
                  {label: 'xl', name: 'xl', value: this.state.tempLeftRelative.xl}
                ]}
              />
            </UU5.Bricks.Column>,
            <UU5.Bricks.Column colWidth="xs-12 s-12 m-6 l-6 xl-6" key={"2"}>
              <UU5.Forms.Checkboxes
                type={2}
                size="m"
                key={1}
                colorSchema="blue"
                label="rightRelative"
                onChange={(opt) => {
                  let value = "";
                  for (let size in opt.value) {
                    if (opt.value[size]) {
                      value += " " + size;
                    }
                  }

                  this.setState({rightRelative: value.trim(), tempRightRelative: opt.value});
                  opt.component.onChangeDefault(opt);
                }}
                value={[
                  {label: 'xs', name: 'xs', value: this.state.tempRightRelative.xs},
                  {label: 's', name: 's', value: this.state.tempRightRelative.s},
                  {label: 'm', name: 'm', value: this.state.tempRightRelative.m},
                  {label: 'l', name: 'l', value: this.state.tempRightRelative.l},
                  {label: 'xl', name: 'xl', value: this.state.tempRightRelative.xl}
                ]}
              />
            </UU5.Bricks.Column>
          ]
          return result;
        },

        _getColumnWidthProps() {
          let result = [
            <UU5.Forms.Text
              label="leftWidth"
              value={this.state.leftWidth}
              inputColWidth="s-12 m-5"
              ref_={(leftWidth) => this._leftWidth = leftWidth}
              key={"1"}
            />,
            <UU5.Forms.Text
              label="rightWidth"
              value={this.state.rightWidth}
              inputColWidth="s-12 m-5"
              ref_={(rightWidth) => this._rightWidth = rightWidth}
              key={"2"}
            />,
            <UU5.Bricks.Button
              onClick={() => {
                this.setState({leftWidth: this._leftWidth.getValue(), rightWidth: this._rightWidth.getValue()})
              }}
              content="Save"
              key={"3"}
            />
          ]
          return result;
        },

        _getSwipeProps() {
          let result = [
            <UU5.Forms.Text
              label="leftSwipe"
              inputColWidth="s-12 m-5"
              value={(this.state.leftSwipe).toString()}
              ref_={(leftSwipe) => this._leftSwipe = leftSwipe}
              key={"1"}
            />,
            <UU5.Forms.Checkbox
              inputColWidth="s-12 m-5"
              value={this.state.leftSwipe === 8}
              label=" "
              key={"2"}
              onChange={(opt) => {
                this.setState({leftSwipe: opt.value ? 8 : 0});
                opt.component.onChangeDefault(opt);
              }}
            />,
            <UU5.Forms.Text
              label="rightSwipe"
              inputColWidth="s-12 m-5"
              value={(this.state.rightSwipe).toString()}
              ref_={(rightSwipe) => this._rightSwipe = rightSwipe}
              key={"3"}
            />,
            <UU5.Forms.Checkbox
              inputColWidth="s-12 m-5"
              value={this.state.rightSwipe === 8}
              label=" "
              key={"4"}
              onChange={(opt) => {
                this.setState({rightSwipe: opt.value ? 8 : 0});
                opt.component.onChangeDefault(opt);
              }}
            />,
            <UU5.Bricks.Button
              onClick={() => {
                this.setState({leftSwipe: parseInt(this._leftSwipe.getValue()), rightSwipe: parseInt(this._rightSwipe.getValue())})
              }}
              content="Save"
              key={"5"}
            />
          ]
          return result;
        },

        _getFixedHeightProps() {
          let result = [
            <UU5.Forms.Number
              label="topFixedHeight"
              inputColWidth="s-12 m-5"
              value={(this.state.topFixedHeight).toString()}
              ref_={(topFixedHeight) => this._topFixedHeight = topFixedHeight}
              step={10}
              min={0}
              key={"0"}
            />,
            <UU5.Forms.Number
              label="bottomFixedHeight"
              inputColWidth="s-12 m-5"
              value={(this.state.bottomFixedHeight).toString()}
              ref_={(bottomFixedHeight) => this._bottomFixedHeight = bottomFixedHeight}
              step={10}
              min={0}
              key={"1"}
            />,
            <UU5.Bricks.Button
              onClick={() => {
                this.setState({topFixedHeight: parseInt(this._topFixedHeight.getValue()), bottomFixedHeight: parseInt(this._bottomFixedHeight.getValue())})
              }}
              content="Save"
              key={"2"}
            />
          ]
          return result;
        },

        _getFixedProps() {
          return ([
            <UU5.Forms.Text key="1" ref_={(opt) => this._topFixed = opt} value={this.state.topFixed === true || this.state.topFixed === false ? this.state.topFixed.toString() : this.state.topFixed} label="topFixed" />,
            <UU5.Forms.Text key="2" ref_={(opt) => this._bottomFixed = opt} value={this.state.bottomFixed === true || this.state.bottomFixed === false ? this.state.bottomFixed.toString() : this.state.bottomFixed} label="bottomFixed" />,
            <UU5.Bricks.Button
              onClick={() => {
                let topFixedValue = this._topFixed.getValue();
                let bottomFixedValue = this._bottomFixed.getValue();

                if (topFixedValue === "true") {
                  topFixedValue = true;
                } else if (topFixedValue === "false") {
                  topFixedValue = false;
                }

                if (bottomFixedValue === "true") {
                  bottomFixedValue = true
                } else if (bottomFixedValue === "false") {
                  bottomFixedValue = false;
                }

                this.setState({topFixed: topFixedValue, bottomFixed: bottomFixedValue})
              }}
              content="Save"
              key={"3"}
            />
          ]);
        },

        _getOtherProps() {
          let result = (
            <UU5.Forms.Checkboxes
              type={2}
              size="m"
              colorSchema="blue"
              onChange={(opt) => {
                this.setState(opt.value);
                opt.component.onChangeDefault(opt);
              }}
              value={[
                {label: 'leftFixed', name: 'leftFixed', value: this.state.leftFixed},
                {label: 'rightFixed', name: 'rightFixed', value: this.state.rightFixed},
                {label: 'fullPage', name: 'fullPage', value: this.state.fullPage},
                {label: 'leftResizable', name: 'leftResizable', value: this.state.leftResizable},
                {label: 'rightResizable', name: 'rightResizable', value: this.state.rightResizable}
              ]}
            />
          )
          return result;
        },

        _getModals() {
          return [
            <UU5.Bricks.Button content="Page Modal" onClick={() => this._modal1.open()} key="1" />,
            <UU5.Bricks.Button content="Force Render Modal" onClick={() => this._modal2.open()} key="2" />
          ];
        },

        _getPopovers() {
          return [
            <UU5.Bricks.Button content="Page Popover" onClick={() => this._popover1.open()} key="1" />,
            <UU5.Bricks.Button content="Force Render Popover" onClick={() => this._popover2.open()} key="2" />
          ];
        },

        render() {

          return ([
            <div style={{position: "fixed", right: "0", top: "0", zIndex: "100000"}}>
              <UU5.Bricks.Dropdown
                label={"uu5g04" + (uu5g04 ? " CDN " + uu5g04 : " local") + " (" + UU5.Environment.version + ")"}
                items={[
                    { label: "local", href: "?" },
                    { label: "CDN 1.0.0", href: "?uu5g04=1.0.0" },
                    { label: "CDN 1.14.0", href: "?uu5g04=1.14.0" }
                ]}
              />
            </div>,
            <UU5.Bricks.Page
              key={Math.random()}
              type={this.state.type}
              top={<UU5.Bricks.Box colorSchema="blue-rich" className="center">{"current screen size: " + this.getScreenSize().toUpperCase()}<br/>TEST<br/>TEST</UU5.Bricks.Box>}
              bottom={<UU5.Bricks.Box colorSchema="blue-rich" className="center">{"current screen size: " + this.getScreenSize().toUpperCase()}<br/>TEST<br/>TEST</UU5.Bricks.Box>}
              left={leftColumnContent}
              right={rightColumnContent}
              contentWrapperProps={{ level: "1", style: { paddingLeft: "1%", paddingRight: "1%" } }}
              leftWidth={this.state.leftWidth}
              rightWidth={this.state.rightWidth}
              topFixed={this.state.topFixed}
              topAlwaysFixed={this.state.topAlwaysFixed}
              topFixedHeight={this.state.topFixedHeight}
              bottomFixed={this.state.bottomFixed}
              bottomAlwaysFixed={this.state.bottomAlwaysFixed}
              bottomFixedHeight={this.state.bottomFixedHeight}
              leftRelative={this.state.leftRelative}
              rightRelative={this.state.rightRelative}
              leftResizable={this.state.leftResizable}
              rightResizable={this.state.rightResizable}
              leftFixed={this.state.leftFixed}
              rightFixed={this.state.rightFixed}
              leftSwipe={this.state.leftSwipe}
              rightSwipe={this.state.rightSwipe}
              fullPage={this.state.fullPage}
              modal={<UU5.Bricks.Modal />}
            >
              <UU5.Bricks.Div className="center">
                <UU5.Bricks.Section header="Page types" level={3}>
                  <UU5.Bricks.ButtonGroup props={{size: "s"}} bordered>
                    {this._getTypes()}
                  </UU5.Bricks.ButtonGroup>
                </UU5.Bricks.Section>
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                  <UU5.Bricks.Button onClick={() => UU5.Common.Tools.getPage().toggleLeft()} content="Toggle left" />
                  <UU5.Bricks.Button onClick={() => UU5.Common.Tools.getPage().toggleRight()} content="Toggle right" />
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                <UU5.Bricks.Section header="leftWidth, rightWidth" level={3}>
                  {this._getColumnWidthProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                <UU5.Bricks.Section header="leftRelative, rightRelative" level={3} style={{overflow: "hidden"}}>
                  {this._getRelativeProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Section header="leftSwipe, rightSwipe" level={3} style={{overflow: "hidden"}}>
                  {this._getSwipeProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                <UU5.Bricks.Section header="fixedHeight" level={3} style={{overflow: "hidden"}}>
                  {this._getFixedHeightProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                <UU5.Bricks.Section header="Other props" level={3}>
                  {this._getOtherProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Line colorSchema='primary' size='m'/>
                <UU5.Bricks.Section header="Fixed props" level={3}>
                  {this._getFixedProps()}
                </UU5.Bricks.Section>
                <UU5.Bricks.Section header="Modal" level={3}>
                  <UU5.Bricks.ButtonGroup size="s" bordered>
                    {this._getModals()}
                  </UU5.Bricks.ButtonGroup>
                </UU5.Bricks.Section>
                <UU5.Bricks.Section header="Popover" level={3}>
                  <UU5.Bricks.ButtonGroup size="s" bordered>
                    {this._getPopovers()}
                  </UU5.Bricks.ButtonGroup>
                </UU5.Bricks.Section>
              </UU5.Bricks.Div>
              <UU5.Bricks.Modal ref_={(comp) => this._modal1 = comp} content="Normal" />
              <UU5.Bricks.Modal ref_={(comp) => this._modal2 = comp} forceRender content="ForceRender" />
              <UU5.Bricks.Popover ref_={(comp) => this._popover1 = comp} content="Normal" />
              <UU5.Bricks.Popover ref_={(comp) => this._popover2 = comp} forceRender content="ForceRender" />
              <UU5.Bricks.Paragraph />
              <UU5.Forms.Datepicker />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
              <UU5.Bricks.Paragraph />
            </UU5.Bricks.Page>
          ]);
        }
      });

      ReactDOM.render(<Page />, document.getElementById('uu5Example'));
    </script>
  </body>
</html>
